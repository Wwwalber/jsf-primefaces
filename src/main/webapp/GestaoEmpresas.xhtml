<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      template="WEB-INF/template/Layout.xhtml">

      <ui:remove>a tag html agora</ui:remove>
      <!-- diferencia prefixo jsf vs. html -->
<!-- Seus componentes JSF aqui -->
<ui:remove>head e header não precisamos mais aqui porque já está no template</ui:remove>

<ui:define name="titulo">
    Cadastro de Empresas
</ui:define>
<ui:remove>a tag body agora</ui:remove> <ui:remove>renderidado no tamplate na posição de mesmo 'name'</ui:remove>
<ui:define name="conteudo"> <ui:remove>será renderidado no tamplate na posição de mesmo 'name'</ui:remove>
    <ui:remove>chamada do método para preencher a dataTable</ui:remove>
    <f:metadata>
        <f:viewAction action="#{gestaoEmpresasBean.todasEmpresas}" />
    </f:metadata>

    <h:form>
        <p:toolbar id="toolbar">
            <f:facet name="left">
                <p:inputText placeholder="digite um termo para pesquisa..." />
                <p:commandButton value="Pesquisar" type="button" icon="fa fa-search"/>
                <p:spacer height="20px" />

                <span class="ui-separator">
                    <span class="ui-icon ui-icon-grip-dotted-vertical" />
                </span> 

                <p:commandButton value="Nova" icon="fa fa-plus" 
                onclick="PF('empresaDialogWidgetVar').show()" />

                <span class="ui-separator">
                    <span class="ui-icon ui-icon-grip-dotted-vertical" />
                </span>     
                
                <p:commandButton title="Editar" icon="fa fa-edit"/> 
    
                <p:commandButton title="Excluir" icon="fa fa-trash"/>
    
                <span class="ui-separator">
                    <span class="ui-icon ui-icon-grip-dotted-vertical" />
                </span>  
    
                <p:commandButton title="Exportar para o Excel" icon="fa fa-file-excel-o"/>
            </f:facet>

        </p:toolbar>
        <p:spacer height="20px" />

        <p:dataTable value="#{gestaoEmpresasBean.listaEmpresas}"
            var="empresa" emptyMessage="Nenhuma informação a ser exibida"
            paginator="true" rows="2" paginatorPosition="bottom"  ><ui:remove>a variável 'empresa' tem acesso lá na classe Java a entidade Empresa</ui:remove>
            <p:column headerText="Razão Social" sortBy="#{empresa.razaoSocial}">
                <h:outputText value="#{empresa.razaoSocial}" />
            </p:column>

            <p:column headerText="Nome Fantasia">
                <h:outputText value="#{empresa.nomeFantasia}" />
            </p:column>

            <p:column headerText="Tipo Empresa">
                <h:outputText value="#{empresa.tipo}" />
            </p:column>

            
            <p:column headerText="Ramo Atividade">
                <h:outputText value="#{empresa.ramoAtividade.descricao}" />
            </p:column>
        </p:dataTable>
                           <ui:remove>widgetVar - espécie de variável usada para acessar dialog no cliente via JavaScript</ui:remove>     
        <p:dialog header="Nova empresa" widgetVar="empresaDialogWidgetVar" modal="true"
            resizable="false" closeOnEscape="true" >
            <p:commandButton value="Teste" />
        </p:dialog>
    </h:form>
</ui:define>
</ui:composition>